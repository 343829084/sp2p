<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>登录</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="@{'/public/stylesheets/reset.css'}" />
    <script type="text/javascript" src="@{'/public/javascripts/jquery-2.0.js'}"></script>
    <link rel="stylesheet" type="text/css" href="@{'/public/stylesheets/mobile/jquery.mobile-1.4.3.css'}" />
    <link rel="stylesheet" type="text/css" href="@{'/public/stylesheets/mobile/login.css'}" />
    <link rel="stylesheet" type="text/css" href="@{'/public/stylesheets/mobile/mobileCommon.css'}" />
    <script type="text/javascript" src="@{'/public/javascripts/verification.js'}"></script>
    <script type="text/javascript" src="@{'/public/javascripts/mobileCommon.js'}"></script>

    <script type="text/javascript" src="@{'/public/javascripts/jquery-2.0.js'}"></script>
    <script type="text/javascript" src="@{'/public/javascripts/jquery.mobile-1.4.3.js'}"></script>
</head>

<body>


<div data-role="page">
    <div data-role="content " class="ui-content">

    <form method="post" id="submit" data-ajax="false" action="/mobile/login">
        <div class="ui-field-contain">
            <input type="tel" class="mobile_login_shurk" id="name" name="name" maxlength="11" value="${flash?.name}" placeholder="请输入您的手机号" >

            <input type="password" class="mobile_login_shurk" id="password" maxlength="20" name="password" value="${flash?.password}" placeholder="请输入登录密码">
        </div>

        <a class="ui-btn ui-corner-all ui-shadow ui-btn-b" id="submit" type="submit" onclick="login()" disabled="disabled" >立即登录</a>
    </form>

        <div class="ui-field-contain ui-grid-a">
            <div class="ui-block-a"><a href="/mobile/register">立即注册</a></div>
            <div class="ui-block-b text-right"><a href="#">忘记密码</a></div>
        </div>


        <div id="error_tips">
            <div class="error_tips">
                <h4 class="error_tips_title">提示</h4>
                <p class="error_tips_content"><var id="error_msg">${flash?.error}</var></p>
                <div class="close_error_tips">
                    <span id="btn_closeErrorTips" class="btn_PopRed cwhite" onclick="closeErrorTips();">确 定</span>
                </div>
            </div>
            </div><div class="opacity_div"></div>
        </div>


    </div>

</div>

</body>
</html>


<script type="text/javascript">
    $(document).on("pageinit", function(){
        veriChangeVal("submit","#name","#password");

        var error = '${flash?.error}';
        if (error == null || error == undefined || error == '') {
            $("#error_tips").hide();
        }else{
            $("#error_tips").show();
        }
    });


    function login(){
        var PhoneNumber = veriPhoneNumber($("#name").val());
        if (PhoneNumber != true) {
            $("#error_tips").show();
            $("#error_msg").text(PhoneNumber);
            return;
        }

        var password = veriPassword($("#password").val());
        if (password != true) {
            $("#error_tips").show();
            $("#error_msg").text(password);
            return;
        }
        $("#submit").submit();
    }

</script>
